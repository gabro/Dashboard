var Eating = require('../../models/eating.js');

function single(eatings, name, self) {
  for (var i = 0; i < eatings.length; i++)
    if (eatings[i].name == name) {
      eatings[i]['set'] = true;
      eatings[i]['disabled'] = (name != self);
      return eatings[i];
    }

    return {
      name: name,
      disabled: name != self,
      lunch: false,
      dinner: false,
      set: false
    }
  }

  function get(cb) {
    var today = new Date();
    today.setHours(0,0,0,0);
    Eating.find({date: today}, function(err, eatings) {
      cb(eatings);
    });
  };

  var names = ['gio', 'luca', 'jaja', 'gabro', 'claudio', 'dani'];



  module.exports = {
    get: get,
    single: single,
    names: names
  };