var Meal = require('../../models/meal.js');

function single(meals, name, self) {
  for (var i = 0; i < meals.length; i++) {
    if (meals[i].name == name) {
      return {
        name: meals[i].name,
        disabled: name != self,
        lunch: meals[i].lunch,
        dinner: meals[i].dinner,
        set: true
      }
    }
  }

  return {
    name: name,
    disabled: name != self,
    lunch: false,
    dinner: false,
    set: false
  }
}

function get(cb) {
  var today = new Date();
  today.setHours(0,0,0,0);
  Meal.find({date: today}, function(err, meals) {
    cb(meals);
  });
};

var names = ['gio', 'luca', 'jaja', 'gabro', 'claudio', 'dani'];

module.exports = {
  get: get,
  single: single,
  names: names
};